{% extends "base.html" %}
{% load static %}
{% block content %}
<!-- content starts here -->

<div class="container-fluid">
    <div class="row">
        <div id="flightsTable" class="container text-left">
            <!-- add if statements to adjust cols for departures vs arrivals -->
            <div class="row row-cols-6 row-cols-sm-7 row-cols-xl-8" id="table-header">
                <div class="col-5 col-sm-4 col-xl-3">
                    <h3>Destination</h3>
                </div>
                <!-- hide airline name on large or smaller devices -->
                <div class="col col-xl-3 d-none d-xl-block">
                    <h3>Airline</h3>
                </div>
                <!-- hide flight code on x-small devices -->
                <div class="col d-none d-sm-block">
                    <h3>Flight</h3>
                </div>
                <div class="col">
                    <h3>Time</h3>
                </div>
                <!-- if statement needs to check if this is a departure board or not.
                 do not use the is_departure field, as that is now redundant. -->
                {% if flight.terminal %}
                <!-- if departure, hide terminal on small or smaller devices -->
                <div class="col d-none d-md-block">
                    <h3>Terminal</h3>
                </div>
                {% endif %}
                <!-- if statement needs to check if this is a departure board or not.
                 do not use the is_departure field, as that is now redundant. -->
                {% if flight.gate %}
                <!-- if departure, hide gate on medium or smaller devices -->
                <div class="col d-none d-lg-block">
                    <h3>Gate</h3>
                </div>
                {% endif %}
                <div class="col-3 col-sm-2">
                    <h3>Status</h3>
                </div>
            </div>
            {% for flight in flight_list %}
            <a href="{% url 'flight_detail' flight.id %}">
                <div class="row row-cols-6 row-cols-sm-7 row-cols-xl-8
                table-row table-row-{% if forloop.counter0|divisibleby:'2' %}odd{% else %}even{% endif %}">
                    <div class="col-5 col-sm-4 col-xl-3 d-block">{{ flight.arrival_airport.city }}</div>
                    <!-- hide airline name on large or smaller devices -->
                    <div class="col col-xl-3 d-none d-xl-block">{{ flight.airline }}</div>
                    <!-- hide flight code on x-small devices -->
                    <div class="col d-none d-sm-block">{{ flight.flight_number }}</div>
                    <div class="col d-block">{{ flight.expected_time|time:"H:i" }}</div>
                    <!-- if statement needs to check if this is a departure board or not.
                 do not use the is_departure field, as that is now redundant. -->
                    {% if flight.terminal %}
                    <!-- if departure, hide terminal on small or smaller devices -->
                    <div class="col d-none d-md-block">{{ flight.terminal }}</div>
                    {% endif %}
                    <!-- if statement needs to check if this is a departure board or not.
                 do not use the is_departure field, as that is now redundant. -->
                    {% if flight.gate %}
                    <!-- if departure, hide gate on medium or smaller devices -->
                    <div class="col d-none d-lg-block">{{ flight.gate }}</div>
                    {% endif %}
                    <div class="col-3 col-sm-2 d-block">{{ flight.status }}</div>
                    <!-- show expand button on large or smaller devices -->
                    <div class="col d-block d-xl-none text-end">
                        <button class="btn btn-primary expand-btn" data-flight_id="expand-{{ flight.id }}"></button>
                    </div>
                </div>
            </a>
            <!-- plus button toggles this extra information row to be visible. -->
            <div class="row extra-flight-info" id="expand-{{ flight.id }}" style="display: none;">
                <!-- show airline name on large or smaller devices -->
                <div class="col d-block d-xl-none"><strong>Airline: </strong>{{ flight.airline }}</div>
                <!-- show flight code on x-small devices -->
                <div class="col d-block d-sm-none"><strong>Flight Number: </strong>{{ flight.flight_number }}</div>
                <!-- if statement needs to check if this is a departure board or not.
                 do not use the is_departure field, as that is now redundant. -->
                {% if flight.terminal %}
                <!-- if departure, show terminal on small or smaller devices -->
                <div class="col d-block d-md-none"><strong>Terminal: </strong>{{ flight.terminal }}</div>
                {% endif %}
                <!-- if statement needs to check if this is a departure board or not.
                 do not use the is_departure field, as that is now redundant. -->
                {% if flight.gate %}
                <!-- if departure, show gate on medium or smaller devices -->
                <div class="col d-block d-lg-none"><strong>Gate: </strong>{{ flight.gate }}</div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <!-- <table class="table">
            <thead>
                <tr>
                    <th>Destination</th>
                    <th>Airline</th>
                    <th>Flight Number</th> -->
        <!-- We will be displaying the expected time rather than the scheduled time, so the user
                 can immediately see when they need to get to the gate and when to expect take off. -->
        <!-- <th>Departure Time</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for flight in flight_list %}
                <tr>
                    <td><a href="{% url 'flight_detail' flight.id %}">{{ flight.arrival_airport.city }}</a></td>
                    <td><a href="{% url 'flight_detail' flight.id %}">{{ flight.airline }}</a></td>
                    <td><a href="{% url 'flight_detail' flight.id %}">{{ flight.flight_number }}</a></td>
                    <td><a href="{% url 'flight_detail' flight.id %}">{{ flight.expected_time|time:"H:i" }}</a></td>
                    <td><a href="{% url 'flight_detail' flight.id %}">{{ flight.status }}</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table> -->
    </div>
</div>


<!-- end of index.html -->
{% endblock %}

{% block extras %}
<script src="{% static 'js/flight_timetable.js' %}"></script>
{% endblock extras %}